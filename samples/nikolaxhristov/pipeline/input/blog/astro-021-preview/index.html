<!DOCTYPE html>
<html lang="en" class="astro-F3HETJL3">
	<head>
		<!-- Global Metadata --><meta charset="utf-8">
<meta name="generator" content="Astro v1.6.11">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#8D46E7">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<link rel="mask-icon" href="/favicon.svg" color="#8D46E7">
<link rel="sitemap" href="/sitemap-index.xml">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS">

<title>Astro 0.21 Preview: Vite + WASM = ⚡️ | Astro</title>

<!-- SEO STARTS --><meta name="mobile-web-app-capable" content="yes">
<meta name="robots" content="follow, index">
<meta name="apple-mobile-web-app-title" content="Astro">

<meta content="Get a sneak preview of what is next for Astro, including our new Vite build engine and WASM-powered Go compiler." name="description">
<link rel="canonical" href="https://astro.build.compress.critters.pages.dev/blog/astro-021-preview/">

<meta name="og:site_name" property="og:site_name" content="Astro">
<meta name="og:type" property="og:type" content="article">
<meta property="og:description" content="Get a sneak preview of what is next for Astro, including our new Vite build engine and WASM-powered Go compiler.">
<meta property="og:title" content="Astro 0.21 Preview: Vite + WASM = ⚡️ | Astro">
<meta property="og:image" content="https://astro.build.compress.critters.pages.dev/assets/social_Z1Atds2.jpeg">
<meta property="og:url" content="https://astro.build.compress.critters.pages.dev/blog/astro-021-preview/">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="astrodotbuild">
<meta name="twitter:title" content="Astro 0.21 Preview: Vite + WASM = ⚡️ | Astro">
<meta name="twitter:description" content="Get a sneak preview of what is next for Astro, including our new Vite build engine and WASM-powered Go compiler.">
<meta name="twitter:image" content="https://astro.build.compress.critters.pages.dev/assets/social_Z1Atds2.jpeg">
<!-- /SEO ENDS-->

<!-- Fathom - beautiful, simple website analytics -->
<script src="https://certain-quality.astro.build/script.js" data-site="EZBHTSIG" defer></script>

	<link rel="stylesheet" href="/assets/404.2f0011fe.css" />
<link rel="stylesheet" href="/assets/_slug_.b0ffba02.css" />
<link rel="stylesheet" href="/assets/_slug_.e85d6370.css" />
<link rel="stylesheet" href="/assets/rss.xml.c4aaed3a.css" /><script type="module" src="/hoisted.325dab7f.js"></script>
<script type="module" src="/page.5a6f3db5.js"></script></head>

	<body class="astro-F3HETJL3">
		<div class="relative overflow-hidden min-h-screen flex flex-col astro-F3HETJL3">
			

<header id="navheader" class="fixed top-0 left-0 right-0 z-20 astro-2EIQQAR5">
	<div class="bg-neutral-900 text-neutral-400 py-4 astro-2EIQQAR5">
		<nav class="relative max-w-7xl mx-auto flex items-center justify-between px-4 sm:px-6 astro-2EIQQAR5" aria-label="Global">
			<div class="flex flex-col sm:flex-row items-center flex-1 gap-y-6 astro-2EIQQAR5">
				<div class="flex items-center justify-between w-full md:w-auto -m-2 astro-2EIQQAR5">
					<a href="/" class="flex gap-x-1 text-neutral-50 font-semibold text-xl astro-2EIQQAR5" id="navlogo">
						<span class="sr-only astro-2EIQQAR5">Astro</span>
					</a>
					<div class="-mr-2 sm:-mr-6 flex items-center md:hidden astro-2EIQQAR5">
						<button type="button" id="menubtn" class="rounded-md p-2 inline-flex items-center justify-center hover:bg-neutral-600 hover:text-neutral-100 focus:outline-none focus:ring-2 focus-ring-inset focus:ring-neutral-50 astro-2EIQQAR5" aria-expanded="false">
							<span class="sr-only astro-2EIQQAR5">Open main menu</span>
						</button>
					</div>
				</div>
				<div id="menu" class="flex flex-col sm:flex-row gap-x-8 gap-y-4 sm:ml-10 text-center sm:text-left sm:pb-0 astro-2EIQQAR5">
					<a href="/showcase" class="text-base text-neutral-50 hover:text-neutral-300 astro-2EIQQAR5">
								Showcase
							</a><a href="https://astro.docs.compress.critters.pages.dev" class="text-base text-neutral-50 hover:text-neutral-300 astro-2EIQQAR5">
								Docs
							</a><a href="/themes" class="text-base text-neutral-50 hover:text-neutral-300 astro-2EIQQAR5">
								Themes
							</a><a href="/integrations" class="text-base text-neutral-50 hover:text-neutral-300 astro-2EIQQAR5">
								Integrations
							</a><a href="/blog" class="text-base text-neutral-50 hover:text-neutral-300 astro-2EIQQAR5">
								Blog
							</a>
				</div>

				<div id="mobilesocial" class="items-center gap-x-3 flex sm:hidden pb-4 astro-2EIQQAR5">
					<a class="ml-3 flex items-center no-underline astro-2EIQQAR5" href="https://github.com/withastro/astro" title="Go to Astro's GitHub repo">
									<div class="item-center hidden sm:flex astro-2EIQQAR5">
										<div class="bg-primary-900 border-primary-500 flex h-6 items-center rounded-l border border-r-0 px-2 text-[13px] font-semibold	leading-3 text-orange-100 astro-2EIQQAR5">
											<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="mr-1 block h-4 w-4 astro-2EIQQAR5">
												<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" class="astro-2EIQQAR5"></path>
											</svg>
											22.8K
										</div>
										<div class="inline-block w-[18px] overflow-hidden astro-2EIQQAR5">
											<div class="bg-primary-900 border-primary-500 h-6 w-[17px] origin-top-left rotate-45 transform border border-l-0 astro-2EIQQAR5"></div>
										</div>
									</div>
								</a><a href="/chat" class="astro-2EIQQAR5">
									<span class="sr-only astro-2EIQQAR5">Join the Astro community on Discord</span>
								</a><a href="https://twitter.com/astrodotbuild" class="astro-2EIQQAR5">
									<span class="sr-only astro-2EIQQAR5">Follow Astro on Twitter</span>
								</a>
				</div>
			</div>
			<div class="items-center ml-6 pl-1 gap-x-3 hidden md:flex astro-2EIQQAR5">
				<a class="ml-3 flex items-center no-underline astro-2EIQQAR5" href="https://github.com/withastro/astro" title="Go to Astro's GitHub repo">
								<div class="item-center hidden sm:flex astro-2EIQQAR5">
									<div class="bg-primary-900 border-primary-500 flex h-6 items-center rounded-l border border-r-0 px-2 text-[13px] font-semibold	leading-3 text-orange-100 astro-2EIQQAR5">
										<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true" class="mr-1 block h-4 w-4 astro-2EIQQAR5">
											<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" class="astro-2EIQQAR5"></path>
										</svg>
										22.8K
									</div>
									<div class="inline-block w-[18px] overflow-hidden astro-2EIQQAR5">
										<div class="bg-primary-900 border-primary-500 h-6 w-[17px] origin-top-left rotate-45 transform border border-l-0 astro-2EIQQAR5"></div>
									</div>
								</div>
							</a><a href="/chat" title="Join the Astro community on Discord" class="astro-2EIQQAR5">
								<span class="sr-only astro-2EIQQAR5">Join the Astro community on Discord</span>

							</a><a href="https://twitter.com/astrodotbuild" title="Follow Astro on Twitter" class="astro-2EIQQAR5">
								<span class="sr-only astro-2EIQQAR5">Follow Astro on Twitter</span>

							</a>
			</div>
		</nav>
	</div>
</header>



			<main class="flex-1 astro-Q52DA2LF astro-F3HETJL3">
				<article class="max-w-screen-md px-4 py-12 sm:py-24 mx-auto astro-Q52DA2LF">
		
		
		<h1 class="my-6 text-4xl sm:text-5xl text-neutral-900 font-bold text-center astro-Q52DA2LF">
			Astro 0.21 Preview: Vite + WASM = ⚡️
		</h1>
		<div class="my-4 space-y-2 text-neutral-500 text-lg astro-Q52DA2LF">
			<p class="flex gap-2 items-center justify-center flex-wrap astro-Q52DA2LF">
				<time datetime="October 6, 2021" class="astro-Q52DA2LF">
					October 6, 2021
				</time>
				<span class="astro-Q52DA2LF">by</span>
				<a href="https://twitter.com/FredKSchott" class="inline-flex space-x-1 no-underline hover:underline astro-Q52DA2LF">
								<img class="my-0 h-6 w-6 rounded-full" alt="" aria-hidden="true" width="48" height="48" src="/assets/fred.d6714e6b_hg6iM.jpg" loading="lazy" decoding="async">
								<span class="astro-Q52DA2LF">Fred Schott</span>
							</a>
			</p>
		</div>
		<hr class="my-4 astro-Q52DA2LF">
		<div class="prose text-lg astro-Q52DA2LF">
			<p>Astro v0.21.0 will be our biggest release yet. At a high-level, it includes:</p>
<ul>
<li><a href="#hello-vite">A new build engine, powered by Vite</a></li>
<li><a href="#hello-wasm">A new WASM compiler, written in Go</a></li>
<li><a href="#components-in-markdown">Brand new features, like Components-in-Markdown</a></li>
<li><a href="#hmr-meet-html">A new system for HTML live-updating via HMR</a></li>
</ul>
<p>You can try out our latest release today
<a href="https://gitpod.io#snapshot/5e7cf2f1-8108-4fa5-99d3-ed8de70d8c23">in the browser</a>
or by running <code>npm install astro@next--compiler</code> in a new project directory on
your machine.</p>
<p>Astro is quickly becoming the production-ready framework for building faster,
content-focused websites. To celebrate this milestone, here are some highlights
and details on what you can expect in Astro v0.21.0 and beyond.</p>
<h2 id="hello-vite">Hello, Vite!</h2>
<p>Astro 0.21 is getting an internal build engine upgrade, replacing Snowpack with
<a href="https://vitejs.dev">Vite</a> going forward.</p>
<p>We ran some early experiments with Vite and came away extremely impressed. Vite
is well-maintained, well-documented, a bit faster, has great error messages, and
has been building clear community buy-in across multiple frameworks. SSR
handling can be a bit flakey, but the Vite team is aware of this and actively
working on it.</p>
<p>So now, when Evan You tweets about
<a href="https://twitter.com/youyuxi/status/1440718351802646550">some great performance optimization</a>
that they’re making in Vite you can be certain that the same speed is coming to
Astro as well.</p>
<p>The reverse is also true: we can now contribute fixes and improvements back to
the larger Vite community. Now, when we fix an SSR bug in Astro (like
<a href="https://github.com/vitejs/vite/pull/5197">adding support for ESM-only npm packages</a>)
we’re also fixing it for every other Vite user, including
<a href="https://kit.svelte.dev/docs#routing-endpoints">SvelteKit</a>.</p>
<p>There’s one other huge benefit to choosing Vite: Rollup plugins. Starting in
v0.21.0, you’ll be able to connect the entire ecosystem of Rollup plugins to
Astro. Enable new features like
<a href="https://github.com/JonasKruckenberg/imagetools/tree/main/packages/vite">image optimizations</a>
and <a href="https://github.com/antfu/unplugin-icons">icon loading</a> with just a few
simple plugins. Magic!</p>
<p>This switch from Snowpack to Vite might come as a surprise to some: Both Drew
and myself are maintainers on both projects. This was
<a href="https://dev.to/fredkschott/5-more-things-i-learned-building-snowpack-to-20-000-stars-5dc9">a hard decision</a>
for us to make. But ultimately, after working with both tools I can confidently
say that Vite will be a great choice for Astro’s future.</p>
<h2 id="hello-wasm">Hello, WASM!</h2>
<p>Astro 0.21 features another huge low-level improvement: the brand new
<a href="https://github.com/withastro/astro-compiler-next">@astrojs/compiler</a>. Astro’s
new compiler is written in Go and distributed as WASM. You can run it right in
your browser, or on the server in Node.js and Deno.</p>
<p>The new <a href="https://github.com/withastro/astro-compiler-next">@astrojs/compiler</a>
unlocks:</p>
<ul>
<li><strong>Flexibility:</strong> Run the compiler anywhere with WASM.</li>
<li><strong>Speed:</strong> Build sites faster with Go’s compiled-language performance.</li>
<li><strong>Stability:</strong> Writing our own compiler allowed us to fix some long-standing
bugs.</li>
</ul>
<p>You can play with the new compiler today right in your browser at
<a href="https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/play">https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/play</a>.
This REPL is just one example of what is now possible when you have a fast,
runs-anywhere compiler.</p>
<p><p>Shout out to <span class="mention inline-block align-middle leading-none m-0">
    <a href="https://twitter.com/n_moore" title="Follow Nate Moore on Twitter" class="inline-flex no-underline items-center whitespace-nowrap m-0 font-bold space-x-1">
        <img class="my-0 h-6 w-6 rounded-full" alt="" aria-hidden="true" width="48" height="48" src="/assets/nate.f5dc0bbe_Z1lJxJF.jpg" loading="lazy" decoding="async">
        <span>Nate Moore</span>
    </a>
</span> who did an incredible job with this
project.</p></p>
<h2 id="components-in-markdown">Components in Markdown</h2>
<p>Our most requested feature <strong><em>by far</em></strong> has been the ability to use components
directly in Markdown. After months of work, we’re excited to announce that this
feature is finally coming to Astro.</p>
<p>Starting in v0.21.0, you can import components inside of your Markdown
frontmatter via an optional <code>setup</code> script. Once imported, your components can
be used anywhere on the page:</p>
<pre class="astro-code" style="background-color:#0d1117;overflow-x:auto"><code><span class="line"><span style="color:#C9D1D9">---</span></span>
<span class="line"><span style="color:#7EE787">title</span><span style="color:#C9D1D9">: </span><span style="color:#A5D6FF">&quot;Astro 0.21 Early Preview&quot;</span></span>
<span class="line"><span style="color:#7EE787">setup</span><span style="color:#C9D1D9">: </span><span style="color:#FF7B72">|</span></span>
<span class="line"><span style="color:#A5D6FF">    import Logo from &#39;../components/Logo.astro&#39;;</span></span>
<span class="line"><span style="color:#A5D6FF">    import ReactCounter from &#39;../components/Counter.jsx&#39;;</span></span>
<span class="line"><span style="color:#C9D1D9">---</span></span>
<span class="line"></span>
<span class="line"><span style="color:#79C0FF;font-style:italic"># Astro now supports components in Markdown!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9">&lt;Logo /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFA657">-</span><span style="color:#C9D1D9">   Back to markdown here.</span></span>
<span class="line"><span style="color:#FFA657">-</span><span style="color:#C9D1D9">   Supports static Astro components.</span></span>
<span class="line"><span style="color:#FFA657">-</span><span style="color:#C9D1D9">   Supports dynamic React/Vue/Svelte components!</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C9D1D9">&lt;ReactCounter start={0} client:load /&gt;</span></span></code></pre>
<p>This new <code>setup</code> script was designed for maximum flexibility. We’ll keep
improving this API going forward with planned support for default components,
default layouts, and markdown component overrides.</p>
<h2 id="hmr-meet-html">HMR, meet HTML</h2>
<p>Starting in v0.21.0, Astro will support full HMR for Astro components and pages.
Change any <code>.astro</code> file in your codebase, and watch the dev server update the
page without a full refresh and without losing any client state.</p>
<p>Astro has always supported powerful HMR updates for client-side JavaScript
components like React, Preact, Svelte, Vue, and Solid.js. But adding this for
Astro was a fun challenge because Astro components are just static HTML. Our
“Zero JavaScript” approach meant that there was no “Astro runtime” to hook into
for updates. We had to get creative.</p>
<p>Now, Astro’s dev server sends HTML updates to the browser and then runs a small
script to diff those updates against the current page. This creates a more
granular, component-level HMR update that won’t impact the rest of the page.</p>
<h2 id="try-it-today">Try it today</h2>
<p>If you’ve read this far, we’d love your help trying out the latest release
before launch. You can try out our latest release today
<a href="https://gitpod.io#snapshot/5e7cf2f1-8108-4fa5-99d3-ed8de70d8c23">in the browser</a>
or by running <code>npm install astro@next--compiler</code> in a new project directory. You
can follow our progress and leave feedback in the <code>next</code> PR on GitHub:
<a href="https://github.com/withastro/astro/pull/1406">https://github.com/withastro/astro/pull/1406</a></p>
<p>Leave feedback, report bugs, and get involved with Astro’s development in our
<a href="https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/chat">Discord server</a>.
You can also <a href="https://twitter.com/astrodotbuild">follow along</a> on Twitter.</p>
<aside class="font-sans rounded border px-6 py-4 bg-slate-50">
	<div class="mt-3 mb-1 leading-normal text-lg">
		
		<p>Keep your eyes to the sky Astronaut! 🧑‍🚀🚀</p><p>There will be more news on v0.21 soon.</p>
	</div>
</aside>
		</div>
	</article>
			</main>

			<footer class="bg-neutral-900">
	<div class="max-w-7xl mx-auto py-12 px-4 overflow-hidden sm:px-6 lg:px-8">
		<nav class="-mx-5 -my-2 flex flex-wrap justify-center" aria-label="Footer">
			<div class="px-5 py-2 text-center">
						<a href="https://astro-docs-compress-critters.pages.dev/en/concepts/why-astro/" class="text-base text-neutral-300 hover:text-neutral-100 hover:underline">
							Why Astro?
						</a>
					</div><div class="px-5 py-2 text-center">
						<a href="https://astro-docs-compress-critters.pages.dev/" class="text-base text-neutral-300 hover:text-neutral-100 hover:underline">
							Documentation
						</a>
					</div><div class="px-5 py-2 text-center">
						<a href="/blog" class="text-base text-neutral-300 hover:text-neutral-100 hover:underline">
							Blog
						</a>
					</div><div class="px-5 py-2 text-center">
						<a href="/press" class="text-base text-neutral-300 hover:text-neutral-100 hover:underline">
							Press
						</a>
					</div><div class="px-5 py-2 text-center">
						<a href="/privacy" class="text-base text-neutral-300 hover:text-neutral-100 hover:underline">
							Privacy Policy
						</a>
					</div><div class="px-5 py-2 text-center">
						<a href="https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/company/" class="text-base text-neutral-300 hover:text-neutral-100 hover:underline">
							The Astro Technology Company (We&#39;re Hiring!)
						</a>
					</div>
		</nav>
		<div class="mt-8 flex justify-center space-x-6">
			<a href="https://github.com/withastro/astro" title="Go to Astro's GitHub repo" class="text-neutral-300 hover:text-neutral-100">
						<span class="sr-only">Go to Astro&#39;s GitHub repo</span>
						
					</a><a href="/chat" title="Join the Astro community on Discord" class="text-neutral-300 hover:text-neutral-100">
						<span class="sr-only">Join the Astro community on Discord</span>
						
					</a><a href="https://twitter.com/astrodotbuild" title="Follow Astro on Twitter" class="text-neutral-300 hover:text-neutral-100">
						<span class="sr-only">Follow Astro on Twitter</span>
						
					</a>
		</div>
	</div>
</footer>
		</div>
		
	</body>
</html>

