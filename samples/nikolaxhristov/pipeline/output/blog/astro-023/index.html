<!DOCTYPE html><html class=astro-F3HETJL3 lang=en><head><!-- Global Metadata --><meta charset=utf-8><meta content="Astro v1.6.10" name=generator><meta content="width=device-width" name=viewport><meta content=#8D46E7 name=theme-color><link href=/favicon.svg rel=icon type=image/svg+xml><link href=/favicon.svg rel=mask-icon color=#8D46E7><link href=/sitemap-index.xml rel=sitemap><link href=/rss.xml rel=alternate type=application/rss+xml title=RSS><title>Astro 0.23 Release Notes | Astro</title><!-- SEO STARTS --><meta content=yes name=mobile-web-app-capable><meta content="follow, index" name=robots><meta content=Astro name=apple-mobile-web-app-title><meta content="Introducing: Dynamic file routes ‚Ä¢ Automatic XSS protection ‚Ä¢ two new component directives ‚Ä¢ vite 2.8 ‚Ä¢ and more!" name=description><link href=https://astro.build.compress.critters.pages.dev/blog/astro-023/ rel=canonical><meta content=Astro name=og:site_name property=og:site_name><meta content=article name=og:type property=og:type><meta content="Introducing: Dynamic file routes ‚Ä¢ Automatic XSS protection ‚Ä¢ two new component directives ‚Ä¢ vite 2.8 ‚Ä¢ and more!" property=og:description><meta content="Astro 0.23 Release Notes | Astro" property=og:title><meta content=https://astro.build.compress.critters.pages.dev/assets/social_Z2jl3ah.jpeg property=og:image><meta content=https://astro.build.compress.critters.pages.dev/blog/astro-023/ property=og:url><meta content=summary_large_image name=twitter:card><meta content=astrodotbuild name=twitter:site><meta content="Astro 0.23 Release Notes | Astro" name=twitter:title><meta content="Introducing: Dynamic file routes ‚Ä¢ Automatic XSS protection ‚Ä¢ two new component directives ‚Ä¢ vite 2.8 ‚Ä¢ and more!" name=twitter:description><meta content=https://astro.build.compress.critters.pages.dev/assets/social_Z2jl3ah.jpeg name=twitter:image><!-- /SEO ENDS--><!-- Fathom - beautiful, simple website analytics --><script src=https://certain-quality.astro.build/script.js data-site=EZBHTSIG defer=defer></script><link href=/assets/404.2f0011fe.css rel=stylesheet /><link href=/assets/_slug_.b0ffba02.css rel=stylesheet /><link href=/assets/_slug_.e85d6370.css rel=stylesheet /><link href=/assets/rss.xml.c4aaed3a.css rel=stylesheet /><script src=/hoisted.325dab7f.js type=module></script><script src=/page.5a6f3db5.js type=module></script></head><body class=astro-F3HETJL3><div class="flex flex-col astro-F3HETJL3 min-h-screen overflow-hidden relative"><header class="astro-2EIQQAR5 fixed left-0 right-0 top-0 z-20" id=navheader><div class="astro-2EIQQAR5 bg-neutral-900 py-4 text-neutral-400"><nav aria-label=Global class="astro-2EIQQAR5 flex items-center justify-between max-w-7xl mx-auto px-4 relative sm:px-6"><div class="astro-2EIQQAR5 flex items-center flex-1 flex-col gap-y-6 sm:flex-row"><div class="astro-2EIQQAR5 flex items-center justify-between -m-2 md:w-auto w-full"><a href=/ class="astro-2EIQQAR5 flex font-semibold gap-x-1 text-neutral-50 text-xl" id=navlogo><span class="astro-2EIQQAR5 sr-only">Astro</span></a><div class="astro-2EIQQAR5 flex items-center -mr-2 md:hidden sm:-mr-6"><button aria-expanded=false class="astro-2EIQQAR5 items-center focus-ring-inset focus:outline-none focus:ring-2 focus:ring-neutral-50 hover:bg-neutral-600 hover:text-neutral-100 inline-flex justify-center p-2 rounded-md" id=menubtn type=button><span class="astro-2EIQQAR5 sr-only">Open main menu</span></button></div></div><div class="astro-2EIQQAR5 flex flex-col sm:flex-row gap-x-8 gap-y-4 sm:ml-10 sm:pb-0 sm:text-left text-center" id=menu><a href=/showcase class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Showcase </a><a href=https://astro.docs.compress.critters.pages.dev class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Docs </a><a href=/themes class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Themes </a><a href=/integrations class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Integrations </a><a href=/blog class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Blog</a></div><div class="astro-2EIQQAR5 flex items-center gap-x-3 pb-4 sm:hidden" id=mobilesocial><a href=https://github.com/withastro/astro class="astro-2EIQQAR5 flex items-center ml-3 no-underline" title="Go to Astro's GitHub repo"><div class="astro-2EIQQAR5 hidden item-center sm:flex"><div class="astro-2EIQQAR5 flex items-center bg-primary-900 border border-primary-500 border-r-0 h-6 rounded-l px-2 text-[13px] font-semibold	leading-3 text-orange-100"><svg aria-hidden=true class="astro-2EIQQAR5 block h-4 mr-1 w-4" fill=currentColor viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg><path class=astro-2EIQQAR5 d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> 22.7K</div><div class="astro-2EIQQAR5 inline-block overflow-hidden w-[18px]"><div class="astro-2EIQQAR5 border-l-0 bg-primary-900 border border-primary-500 h-6 origin-top-left rotate-45 transform w-[17px]"></div></div></div></a><a href=/chat class=astro-2EIQQAR5><span class="astro-2EIQQAR5 sr-only">Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class=astro-2EIQQAR5><span class="astro-2EIQQAR5 sr-only">Follow Astro on Twitter</span></a></div></div><div class="astro-2EIQQAR5 items-center gap-x-3 hidden md:flex ml-6 pl-1"><a href=https://github.com/withastro/astro class="astro-2EIQQAR5 flex items-center ml-3 no-underline" title="Go to Astro's GitHub repo"><div class="astro-2EIQQAR5 hidden item-center sm:flex"><div class="astro-2EIQQAR5 flex items-center bg-primary-900 border border-primary-500 border-r-0 h-6 rounded-l px-2 text-[13px] font-semibold	leading-3 text-orange-100"><svg aria-hidden=true class="astro-2EIQQAR5 block h-4 mr-1 w-4" fill=currentColor viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg><path class=astro-2EIQQAR5 d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> 22.7K</div><div class="astro-2EIQQAR5 inline-block overflow-hidden w-[18px]"><div class="astro-2EIQQAR5 border-l-0 bg-primary-900 border border-primary-500 h-6 origin-top-left rotate-45 transform w-[17px]"></div></div></div></a><a href=/chat class=astro-2EIQQAR5 title="Join the Astro community on Discord"><span class="astro-2EIQQAR5 sr-only">Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class=astro-2EIQQAR5 title="Follow Astro on Twitter"><span class="astro-2EIQQAR5 sr-only">Follow Astro on Twitter</span></a></div></nav></div></header><main class="astro-Q52DA2LF astro-F3HETJL3 flex-1"><article class="astro-Q52DA2LF max-w-screen-md mx-auto px-4 py-12 sm:py-24"><h1 class="astro-Q52DA2LF font-bold my-6 sm:text-5xl text-4xl text-center text-neutral-900">Astro 0.23 Release Notes</h1><div class="astro-Q52DA2LF my-4 space-y-2 text-lg text-neutral-500"><p class="flex items-center astro-Q52DA2LF flex-wrap gap-2 justify-center"><time class=astro-Q52DA2LF datetime="February 19, 2022">February 19, 2022 </time><span class=astro-Q52DA2LF>by</span> <a href=https://twitter.com/FredKSchott class="astro-Q52DA2LF hover:underline inline-flex no-underline space-x-1"><img alt="" aria-hidden=true class="my-0 h-6 rounded-full w-6" decoding=async height=48 loading=lazy src=/assets/fred.d6714e6b_hg6iM.jpg width=48> <span class=astro-Q52DA2LF>Fred Schott</span></a></p></div><hr class="astro-Q52DA2LF my-4"><div class="astro-Q52DA2LF text-lg prose"><p><strong>Astro v0.23.0</strong> has just been released with some new features and highlights:</p><ul><li><a href=#dynamic-file-routes>Dynamic File Routes</a></li><li><a href=#automatic-xss-protection>Automatic XSS Protection</a></li><li><a href=#new-sethtml-and-settext-directives>New <code>set:html</code> and <code>set:text</code> directives</a></li><li><a href=#safe-access-to-sensitive-environment-variables>Safe access to sensitive environment variables</a></li><li><a href=#better-builds-with-vite-v28>Better builds with Vite v2.8</a></li><li><a href=#better-stability-with-astrocompiler-v011>Better stability with @astro/compiler v0.11</a></li><li><a href=#better-build-performance>Better build performance with <code>--experimental-static-builds</code></a></li></ul><h2 id=dynamic-file-routes>Dynamic File Routes</h2><p>You can now build dynamic, non-HTML files in your project by using Astro‚Äôs new <strong>file routes</strong>. Use file routes to dynamically generate files during your build for things like JSON, XML, or even non-text assets like images. This feature has been one of our most requested since the early days of Astro!</p><p>To create a file route inside of your Astro project, create a new JavaScript or TypeScript file inside of your <code>src/pages</code> directory. File routes leverage Astro‚Äôs existing file-based router, so be sure to include the final built file extension in the filename.</p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e>// Example: src/pages/builtwith.json.ts</span></span>
<span class=line><span style=color:#8b949e>// Outputs: /builtwith.json</span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e>// File routes export a get() function, which gets called to generate the file.</span></span>
<span class=line><span style=color:#8b949e>// Return an object with `body` to save the file contents in your final build.</span></span>
<span class=line><span style=color:#ff7b72>export</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>async</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>function</span><span style=color:#c9d1d9> </span><span style=color:#d2a8ff>get</span><span style=color:#c9d1d9>() {</span></span>
<span class=line><span style=color:#c9d1d9>	</span><span style=color:#ff7b72>return</span><span style=color:#c9d1d9> {</span></span>
<span class=line><span style=color:#c9d1d9>		body: </span><span style=color:#79c0ff>JSON</span><span style=color:#c9d1d9>.</span><span style=color:#d2a8ff>stringify</span><span style=color:#c9d1d9>({</span></span>
<span class=line><span style=color:#c9d1d9>			name: </span><span style=color:#a5d6ff>&quot;Astro&quot;</span><span style=color:#c9d1d9>,</span></span>
<span class=line><span style=color:#c9d1d9>			url: </span><span style=color:#a5d6ff>&quot;https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/&quot;</span><span style=color:#c9d1d9>,</span></span>
<span class=line><span style=color:#c9d1d9>		}),</span></span>
<span class=line><span style=color:#c9d1d9>	};</span></span>
<span class=line><span style=color:#c9d1d9>}</span></span></code></pre><p>This feature is only available with the <code>--experimental-static-build</code> flag. <a href=https://astro-docs-compress-critters.pages.dev/en/core-concepts/astro-pages/#non-html-pages>To learn more, check out the docs.</a></p><h2 id=automatic-xss-protection>Automatic XSS Protection</h2><p>Astro v0.23 begins our migration towards automatic HTML escaping inside of Astro template expressions. This new feature will protect you from accidentally injecting untrusted HTML onto your page. Without it, you open yourself up to Cross Site Scripting (XSS) attacks where malicious users can hijack your site to run untrusted or unexpected code on the page.</p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e>&lt;!-- Examples of untrusted HTML injection --&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9>&gt;</span><span style=color:#ff7b72>{</span><span style=color:#a5d6ff>`&lt;span&gt;Hello, dangerous HTML&lt;/span&gt;`</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9>&lt;/</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9>&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9>&gt;</span><span style=color:#ff7b72>{</span><span style=color:#a5d6ff>`&lt;script&gt;alert(&#39;oh no&#39;);&lt;/script&gt;`</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9>&lt;/</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9>&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9>&gt;</span><span style=color:#ff7b72>{</span><span style=color:#c9d1d9>untrustedHtml</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9>&lt;/</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9>&gt;</span></span></code></pre><p>Thanks to React and other component-based UI libraries, XSS vulnerabilities are becoming a thing of the past. Astro is excited to meet this same bar of zero-effort, built-in, automatic XSS protection.</p><p>To help our users migrate, Astro v0.23 will log a warning to the console when unescaped HTML is encountered inside of a template expression. In the next version, template expressions will always escape their contents.</p><h2 id=new-sethtml-and-settext-directives>New <code>set:html</code> and <code>set:text</code> directives</h2><p>Two new directives are introduced to support better HTML injection when you need it. As we covered in the previous section, setting HTML directly is risky. However, in some special cases it may be required. Astro created the new <code>set:html</code> directive for those cases. You can think of it like React‚Äôs <code>dangerouslySetInnerHTML</code>.</p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e>&lt;!-- Examples of explicit HTML setting --&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9> </span><span style=color:#79c0ff>set:html</span><span style=color:#c9d1d9>=</span><span style=color:#ff7b72>{</span><span style=color:#a5d6ff>`&lt;span&gt;Hello, trusted or already escaped HTML&lt;/span&gt;`</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9> /&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9> </span><span style=color:#79c0ff>set:html</span><span style=color:#c9d1d9>=</span><span style=color:#ff7b72>{</span><span style=color:#a5d6ff>`&lt;script&gt;alert(&#39;oh yes&#39;);&lt;/script&gt;`</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9> /&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>div</span><span style=color:#c9d1d9> </span><span style=color:#79c0ff>set:html</span><span style=color:#c9d1d9>=</span><span style=color:#ff7b72>{</span><span style=color:#c9d1d9>trustedOrAlreadyEscapedHtml</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9> /&gt;</span></span></code></pre><p>If you don‚Äôt want a <code>&lt;div&gt;</code> wrapper, you can also use <code>set:html</code> on the Fragment component for zero wrapping HTML:</p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>- {`&lt;span&gt;Hello, dangerous HTML&lt;/span&gt;`}</span></span>
<span class=line><span style=color:#c9d1d9>+ &lt;Fragment set:html={`&lt;span&gt;Hello, trusted or already escaped HTML&lt;/span&gt;`} /&gt;</span></span></code></pre><p><code>set:text</code> is also available to set the element text directly, similar to setting the <code>.text</code> property on an element in the browser. Together, these two directives give you a bit more control over the Astro output when you need it.</p><h2 id=safe-access-to-sensitive-environment-variables>Safe access to sensitive environment variables</h2><p>For security, Vite only loads environment variables that are explicitly opted-in to be exposed with a <code>PUBLIC_</code> prefix. This restriction makes sense in the browser, and protects you from accidentally leaking secret tokens and values. However, it also meant that private environment variables weren‚Äôt available to you at all, even locally inside of server-rendered Astro components.</p><p></p><p>In Astro v0.23, <code>import.meta.env</code> now lets you access your private environment variables inside of Astro and anytime code renders locally or on the server. Astro will continue to protect you on the client, and only expose <code>PUBLIC_</code> variables to the frontend that ships to your users.</p><p></p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e>// DB_PASSWORD is only available when building your site.</span></span>
<span class=line><span style=color:#8b949e>// If any code tried to run this in the browser, it will be empty.</span></span>
<span class=line><span style=color:#ff7b72>const</span><span style=color:#c9d1d9> </span><span style=color:#79c0ff>data</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>=</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>await</span><span style=color:#c9d1d9> </span><span style=color:#d2a8ff>db</span><span style=color:#c9d1d9>(</span><span style=color:#ff7b72>import</span><span style=color:#c9d1d9>.</span><span style=color:#79c0ff>meta</span><span style=color:#c9d1d9>.env.</span><span style=color:#79c0ff>DB_PASSWORD</span><span style=color:#c9d1d9>);</span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e>// PUBLIC_POKEAPI is available anywhere, thanks to the PUBLIC_ prefix!</span></span>
<span class=line><span style=color:#ff7b72>const</span><span style=color:#c9d1d9> </span><span style=color:#79c0ff>data</span><span style=color:#c9d1d9> </span><span style=color:#ff7b72>=</span><span style=color:#c9d1d9> </span><span style=color:#d2a8ff>fetch</span><span style=color:#c9d1d9>(</span><span style=color:#a5d6ff>`${</span><span style=color:#ff7b72>import</span><span style=color:#a5d6ff>.</span><span style=color:#79c0ff>meta</span><span style=color:#a5d6ff>.</span><span style=color:#c9d1d9>env</span><span style=color:#a5d6ff>.</span><span style=color:#79c0ff>PUBLIC_POKEAPI</span><span style=color:#a5d6ff>}/pokemon/squirtle`</span><span style=color:#c9d1d9>);</span></span></code></pre><p>See our <a href=https://astro-docs-compress-critters.pages.dev/en/guides/environment-variables/ >Environment Variables documentation</a> to learn more.</p><h2 id=better-builds-with-vite-v28>Better builds with Vite v2.8</h2><p>Astro v0.23 comes with an internal Vite upgrade that brings new features and huge stability improvements. Vite‚Äôs npm package handling got a boost as well, so that more packages should work in more projects. <a href=https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md>Check out their changelog</a> to learn more.</p><h2 id=better-stability-with-astrocompiler-v011>Better stability with @astro/compiler v0.11</h2><p>Astro v0.23 also got a compiler upgrade which should result in noticeable performance and stability improvements across all projects. <a href=https://github.com/withastro/compiler/releases>Check out the changelog</a> to learn more.</p><h2 id=better-build-performance>Better build performance</h2><p>You may have noticed the reference to <code>--experimental-static-build</code> above, and the fact that some new features are only available behind this flag. This flag is not new in v0.23, but it continues to improve as we get closer to an official release of the feature. This new ‚Äústatic build‚Äù strategy will soon become the default build behavior in Astro.</p><p>If you haven‚Äôt tried the <code>--experimental-static-build</code> flag out yet in your build, please give it a try and leave us feedback in Discord. Check out our blog post <a href=/blog/experimental-static-build>Scaling Astro to 10,000+ Pages</a> to learn more about this future build strategy for Astro.</p><h2 id="">üëã</h2><p>Thank you for reading! <a href=https://twitter.com/astrodotbuild>Follow us on Twitter</a> to stay up to date on Astro releases and news.</p><p>If you‚Äôve read this far, you should definitely <a href=https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/chat>join us on Discord.</a> ;)</p></div></article></main><footer class=bg-neutral-900><div class="py-12 mx-auto px-4 lg:px-8 max-w-7xl overflow-hidden sm:px-6"><nav aria-label=Footer class="flex justify-center flex-wrap -mx-5 -my-2"><div class="text-center px-5 py-2"><a href=https://astro-docs-compress-critters.pages.dev/en/concepts/why-astro/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Why Astro?</a></div><div class="text-center px-5 py-2"><a href=https://astro-docs-compress-critters.pages.dev/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Documentation</a></div><div class="text-center px-5 py-2"><a href=/blog class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Blog</a></div><div class="text-center px-5 py-2"><a href=/press class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Press</a></div><div class="text-center px-5 py-2"><a href=/privacy class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Privacy Policy</a></div><div class="text-center px-5 py-2"><a href=https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/company/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">The Astro Technology Company (We&#39;re Hiring!)</a></div></nav><div class="flex justify-center mt-8 space-x-6"><a href=https://github.com/withastro/astro class="hover:text-neutral-100 text-neutral-300" title="Go to Astro's GitHub repo"><span class=sr-only>Go to Astro&#39;s GitHub repo</span> </a><a href=/chat class="hover:text-neutral-100 text-neutral-300" title="Join the Astro community on Discord"><span class=sr-only>Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class="hover:text-neutral-100 text-neutral-300" title="Follow Astro on Twitter"><span class=sr-only>Follow Astro on Twitter</span></a></div></div></footer></div></body></html>