<!DOCTYPE html><html class=astro-F3HETJL3 lang=en><head><!-- Global Metadata --><meta charset=utf-8><meta content="Astro v1.6.10" name=generator><meta content="width=device-width" name=viewport><meta content=#8D46E7 name=theme-color><link href=/favicon.svg rel=icon type=image/svg+xml><link href=/favicon.svg rel=mask-icon color=#8D46E7><link href=/sitemap-index.xml rel=sitemap><link href=/rss.xml rel=alternate type=application/rss+xml title=RSS><title>Astro 1.4.0 Release | Astro</title><!-- SEO STARTS --><meta content=yes name=mobile-web-app-capable><meta content="follow, index" name=robots><meta content=Astro name=apple-mobile-web-app-title><meta content="Introducing: Astro.cookies • Strict dependency installation • Better control over style ordering • JSX in Vue components" name=description><link href=https://astro.build.compress.critters.pages.dev/blog/astro-140/ rel=canonical><meta content=Astro name=og:site_name property=og:site_name><meta content=article name=og:type property=og:type><meta content="Introducing: Astro.cookies • Strict dependency installation • Better control over style ordering • JSX in Vue components" property=og:description><meta content="Astro 1.4.0 Release | Astro" property=og:title><meta content=https://astro.build.compress.critters.pages.dev/assets/social.4df01cf6_Z1jhpsT.jpeg property=og:image><meta content=https://astro.build.compress.critters.pages.dev/blog/astro-140/ property=og:url><meta content=summary_large_image name=twitter:card><meta content=astrodotbuild name=twitter:site><meta content="Astro 1.4.0 Release | Astro" name=twitter:title><meta content="Introducing: Astro.cookies • Strict dependency installation • Better control over style ordering • JSX in Vue components" name=twitter:description><meta content=https://astro.build.compress.critters.pages.dev/assets/social.4df01cf6_Z1jhpsT.jpeg name=twitter:image><!-- /SEO ENDS--><!-- Fathom - beautiful, simple website analytics --><script src=https://certain-quality.astro.build/script.js data-site=EZBHTSIG defer=defer></script><link href=/assets/404.2f0011fe.css rel=stylesheet /><link href=/assets/_slug_.b0ffba02.css rel=stylesheet /><link href=/assets/_slug_.e85d6370.css rel=stylesheet /><link href=/assets/rss.xml.c4aaed3a.css rel=stylesheet /><script src=/hoisted.325dab7f.js type=module></script><script src=/page.5a6f3db5.js type=module></script></head><body class=astro-F3HETJL3><div class="flex flex-col astro-F3HETJL3 min-h-screen overflow-hidden relative"><header class="astro-2EIQQAR5 fixed left-0 right-0 top-0 z-20" id=navheader><div class="astro-2EIQQAR5 bg-neutral-900 py-4 text-neutral-400"><nav aria-label=Global class="astro-2EIQQAR5 flex items-center justify-between max-w-7xl mx-auto px-4 relative sm:px-6"><div class="astro-2EIQQAR5 flex items-center flex-1 flex-col gap-y-6 sm:flex-row"><div class="astro-2EIQQAR5 flex items-center justify-between -m-2 md:w-auto w-full"><a href=/ class="astro-2EIQQAR5 flex font-semibold gap-x-1 text-neutral-50 text-xl" id=navlogo><span class="astro-2EIQQAR5 sr-only">Astro</span></a><div class="astro-2EIQQAR5 flex items-center -mr-2 md:hidden sm:-mr-6"><button aria-expanded=false class="astro-2EIQQAR5 items-center focus-ring-inset focus:outline-none focus:ring-2 focus:ring-neutral-50 hover:bg-neutral-600 hover:text-neutral-100 inline-flex justify-center p-2 rounded-md" id=menubtn type=button><span class="astro-2EIQQAR5 sr-only">Open main menu</span></button></div></div><div class="astro-2EIQQAR5 flex flex-col sm:flex-row gap-x-8 gap-y-4 sm:ml-10 sm:pb-0 sm:text-left text-center" id=menu><a href=/showcase class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Showcase </a><a href=https://astro.docs.compress.critters.pages.dev class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Docs </a><a href=/themes class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Themes </a><a href=/integrations class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Integrations </a><a href=/blog class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Blog</a></div><div class="astro-2EIQQAR5 flex items-center gap-x-3 pb-4 sm:hidden" id=mobilesocial><a href=https://github.com/withastro/astro class="astro-2EIQQAR5 flex items-center ml-3 no-underline" title="Go to Astro's GitHub repo"><div class="astro-2EIQQAR5 hidden item-center sm:flex"><div class="astro-2EIQQAR5 flex items-center bg-primary-900 border border-primary-500 border-r-0 h-6 rounded-l px-2 text-[13px] font-semibold	leading-3 text-orange-100"><svg aria-hidden=true class="astro-2EIQQAR5 block h-4 mr-1 w-4" fill=currentColor viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg><path class=astro-2EIQQAR5 d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> 22.7K</div><div class="astro-2EIQQAR5 inline-block overflow-hidden w-[18px]"><div class="astro-2EIQQAR5 border-l-0 bg-primary-900 border border-primary-500 h-6 origin-top-left rotate-45 transform w-[17px]"></div></div></div></a><a href=/chat class=astro-2EIQQAR5><span class="astro-2EIQQAR5 sr-only">Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class=astro-2EIQQAR5><span class="astro-2EIQQAR5 sr-only">Follow Astro on Twitter</span></a></div></div><div class="astro-2EIQQAR5 items-center gap-x-3 hidden md:flex ml-6 pl-1"><a href=https://github.com/withastro/astro class="astro-2EIQQAR5 flex items-center ml-3 no-underline" title="Go to Astro's GitHub repo"><div class="astro-2EIQQAR5 hidden item-center sm:flex"><div class="astro-2EIQQAR5 flex items-center bg-primary-900 border border-primary-500 border-r-0 h-6 rounded-l px-2 text-[13px] font-semibold	leading-3 text-orange-100"><svg aria-hidden=true class="astro-2EIQQAR5 block h-4 mr-1 w-4" fill=currentColor viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg><path class=astro-2EIQQAR5 d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> 22.7K</div><div class="astro-2EIQQAR5 inline-block overflow-hidden w-[18px]"><div class="astro-2EIQQAR5 border-l-0 bg-primary-900 border border-primary-500 h-6 origin-top-left rotate-45 transform w-[17px]"></div></div></div></a><a href=/chat class=astro-2EIQQAR5 title="Join the Astro community on Discord"><span class="astro-2EIQQAR5 sr-only">Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class=astro-2EIQQAR5 title="Follow Astro on Twitter"><span class="astro-2EIQQAR5 sr-only">Follow Astro on Twitter</span></a></div></nav></div></header><main class="astro-Q52DA2LF astro-F3HETJL3 flex-1"><article class="astro-Q52DA2LF max-w-screen-md mx-auto px-4 py-12 sm:py-24"><h1 class="astro-Q52DA2LF font-bold my-6 sm:text-5xl text-4xl text-center text-neutral-900">Astro 1.4.0 Release</h1><div class="astro-Q52DA2LF my-4 space-y-2 text-lg text-neutral-500"><p class="flex items-center astro-Q52DA2LF flex-wrap gap-2 justify-center"><time class=astro-Q52DA2LF datetime="September 29, 2022">September 29, 2022 </time><span class=astro-Q52DA2LF>by</span> <a href=https://twitter.com/matthewcp class="astro-Q52DA2LF hover:underline inline-flex no-underline space-x-1"><img alt="" class="my-0 h-6 rounded-full w-6" decoding=async loading=lazy src=/assets/matthew.156c0c47_dfDYr.jpg aria-hidden=true height=48 width=48> <span class=astro-Q52DA2LF>Matthew Phillips</span></a></p></div><hr class="astro-Q52DA2LF my-4"><div class="astro-Q52DA2LF text-lg prose"><p>We just released Astro 1.4.0, featuring:</p><ul><li><strong><a href=#astro-cookies>Astro.cookies</a></strong>: A simplified approach to manipulating cookies within Astro pages and API routes.</li><li><strong><a href=#strict-dependency-installation>Support for strict dependency installation</a></strong>: pnpm users can now have the benefits of its default semi-strict dependency installation strategy in Astro projects.</li><li><strong><a href=#style-ordering>Better control over style ordering</a></strong>: We’ve fixed style ordering so that styles defined in Astro components are lower in bundled CSS than global styles you import.</li><li><strong><a href=#jsx-support-in-vue>JSX support in Vue</a></strong>: Vue users can now define components using JSX and TSX.</li></ul><p>You can update your projects by running <code>npm install astro@latest</code>.</p><h2 id=astrocookies>Astro.cookies</h2><picture><source sizes="(max-width: 767px) 100vw, 736px" srcset="/assets/astro-cookies.3d839dbb_HsV0E.avif 400w,/assets/astro-cookies.3d839dbb_Z1HApmV.avif 800w,/assets/astro-cookies.3d839dbb_hkckM.avif 1500w" type=image/avif><source sizes="(max-width: 767px) 100vw, 736px" srcset="/assets/astro-cookies.3d839dbb_1qNJXq.webp 400w,/assets/astro-cookies.3d839dbb_ZYfApa.webp 800w,/assets/astro-cookies.3d839dbb_10F1iy.webp 1500w" type=image/webp><source sizes="(max-width: 767px) 100vw, 736px" srcset="/assets/astro-cookies.3d839dbb_1PrNWv.png 400w,/assets/astro-cookies.3d839dbb_1qEEOA.png 800w,/assets/astro-cookies.3d839dbb_Z1rvs0B.png 1500w" type=image/png><img alt="Code example that shows off using Astro.cookies" class=astro-O2TNYKPC decoding=async loading=lazy src=/assets/astro-cookies.3d839dbb_Z1rvs0B.png></picture><p>Sites built with <abbr title="Server-side rendering">SSR</abbr> are able to read and set cookies in Astro. Previously, reading cookies required reading the <code>cookie</code> header in the request (<code>Astro.request</code> in pages) and then parsing it using a library. Writing cookies required serializing into <code>Set-Cookie</code> headers in the returned Response.</p><p>Given the importance of cookies in stateful and authenticated apps, we felt a simplified abstraction for cookies would make all of this easier.</p><p>With <code>Astro.cookies</code> you can read and write cookies with a <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map>Map</a>-like API. In the above example, we check if a <code>prefs</code> cookie exists and set a default value if it doesn’t. We then get its value and use it in our template.</p><p>Check out <a href=https://astro-docs-compress-critters.pages.dev/en/reference/api-reference/#astrocookies>the docs</a> for the full API reference.</p><h2 id=strict-dependency-installation>Strict dependency installation</h2><p>If you are using <a href=https://pnpm.io/ >pnpm</a> in your Astro project, you can now install your dependencies using its strict dependency algorithm. Since Astro runs code on your behalf, you previously needed to <a href=https://pnpm.io/blog/2020/10/17/node-modules-configuration-options-with-pnpm#the-worst-case---hoisting-to-the-root>hoist packages to the root</a>, which meant that most of your dependencies (and <em>their</em> dependencies) were installed into the top-level <code>node_modules/</code> folder.</p><p>A stricter installation is more <em>correct</em>, in that a package can only import dependencies it defines in its own <code>package.json</code>. A stricter installation is also faster, as Node.js does not need to look in as many folders to find packages.</p><p>This feature comes for free in Astro 1.4.0 for new projects. Existing projects can remove hoisting configuration they might have in a <code>.npmrc</code> file.</p><h2 id=better-control-over-style-ordering>Better control over style ordering</h2><p>When Astro 1.0 was released, we changed our CSS scoping mechanism to use the <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/:where><code>:where()</code> pseudo-class</a>. This allowed you to better control specificity with the usual means, such as adding class names.</p><p>Making this switch, we didn’t realize that the default ordering of styles wasn’t ideal: styles defined directly in a component came before imported styles in the CSS output, giving component styles a lower precedence than imported styles.</p><p>In 1.4.0, styles you write in Astro components will come <em>after</em> global styles imported. In practice, this means that if you write a component like so:</p><p><strong>Title.astro</strong></p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e>---</span></span>
<span class=line><span style=color:#ff7b72>import</span><span style=color:#c9d1d9> </span><span style=color:#a5d6ff>&quot;../styles/global-titles.css&quot;</span><span style=color:#c9d1d9>;</span></span>
<span class=line><span style=color:#8b949e>---</span></span>
<span class=line></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>h1</span><span style=color:#c9d1d9>&gt;</span><span style=color:#ff7b72>{</span><span style=color:#c9d1d9>Astro.props.title</span><span style=color:#ff7b72>}</span><span style=color:#c9d1d9>&lt;/</span><span style=color:#7ee787>h1</span><span style=color:#c9d1d9>&gt;</span></span>
<span class=line><span style=color:#c9d1d9>&lt;</span><span style=color:#7ee787>style</span><span style=color:#c9d1d9>&gt;</span></span>
<span class=line><span style=color:#c9d1d9>	</span><span style=color:#7ee787>h1</span><span style=color:#c9d1d9> {</span></span>
<span class=line><span style=color:#c9d1d9>		</span><span style=color:#79c0ff>color</span><span style=color:#c9d1d9>: </span><span style=color:#79c0ff>aliceblue</span><span style=color:#c9d1d9>;</span></span>
<span class=line><span style=color:#c9d1d9>	}</span></span>
<span class=line><span style=color:#c9d1d9>&lt;/</span><span style=color:#7ee787>style</span><span style=color:#c9d1d9>&gt;</span></span></code></pre><p>When your site is built and the CSS is bundled you get something like the following:</p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#8b949e>/* /src/styles/global-titles.css */</span></span>
<span class=line><span style=color:#7ee787>h1</span><span style=color:#c9d1d9> {</span></span>
<span class=line><span style=color:#c9d1d9>	</span><span style=color:#79c0ff>color</span><span style=color:#c9d1d9>: onyx;</span></span>
<span class=line><span style=color:#c9d1d9>}</span></span>
<span class=line></span>
<span class=line><span style=color:#8b949e>/* /src/components/Title.astro */</span></span>
<span class=line><span style=color:#7ee787>h1</span><span style=color:#c9d1d9>:where(</span><span style=color:#79c0ff>.astro-1234</span><span style=color:#c9d1d9>) {</span></span>
<span class=line><span style=color:#c9d1d9>	</span><span style=color:#79c0ff>color</span><span style=color:#c9d1d9>: </span><span style=color:#79c0ff>aliceblue</span><span style=color:#c9d1d9>;</span></span>
<span class=line><span style=color:#c9d1d9>}</span></span></code></pre><p>Given that these selectors both have the same specificity, the one listed later—the one scoped to your Title.astro component—will prevail. Within that component, the <code>h1</code> will have <code>color: aliceblue</code>, but any <code>h1</code> defined outside of your component will be <code>onyx</code>.</p><p>You get the best of both worlds: styles defined in Astro are better prioritized if they have the same specificity, but you can override this by increasing specificity when needed.</p><p>The output CSS order is now (from lowest to highest precedence):</p><ol><li>CSS in your <code>public/</code> folder added as <code>&lt;link&gt;</code> tags in the head.</li><li>CSS imported in your frontmatter, in the order of your import statements (depth-first).</li><li>CSS defined in Astro style tags.</li></ol><p>We’re currently writing up full documentation to explain how CSS ordering works and how you can control CSS priority via ordering and specificity.</p><h2 id=jsx-support-in-vue>JSX support in Vue</h2><picture><source sizes="(max-width: 767px) 100vw, 736px" srcset="/assets/vue-jsx.39b61354_1k1z3R.avif 400w,/assets/vue-jsx.39b61354_kVzeb.avif 800w,/assets/vue-jsx.39b61354_1jCj4p.avif 1500w" type=image/avif><source sizes="(max-width: 767px) 100vw, 736px" srcset="/assets/vue-jsx.39b61354_23mo1D.webp 400w,/assets/vue-jsx.39b61354_14hobW.webp 800w,/assets/vue-jsx.39b61354_22X82b.webp 1500w" type=image/webp><source sizes="(max-width: 767px) 100vw, 736px" srcset="/assets/vue-jsx.39b61354_Z1zsvuj.png 400w,/assets/vue-jsx.39b61354_Z2gqiQa.png 800w,/assets/vue-jsx.39b61354_xAMq4.png 1500w" type=image/png><img alt="Code example that shows a JSX component defined with Vue" class=astro-O2TNYKPC decoding=async loading=lazy src=/assets/vue-jsx.39b61354_xAMq4.png></picture><p>You can now use JSX and TSX with the <a href=https://github.com/withastro/astro/blob/d08093f7d4f9762c0edc71e14c796d7ea8038cda/packages/integrations/vue/README.md>Vue integration</a>. Setting <code>jsx: true</code> in the integrations options enables the <a href=https://github.com/vitejs/vite/tree/main/packages/plugin-vue-jsx>@vitejs/plugin-vue-jsx</a> Vite plugin, which does most of the work, and you can use any of its options.</p><hr/><p>Thanks to everyone that contributed to this outstanding release. In addition to these new features there were also a bunch of bug fixes throughout the core packages and integrations. See the <a href=https://github.com/withastro/astro/pull/4903>release notes</a> to learn more.</p></div></article></main><footer class=bg-neutral-900><div class="py-12 mx-auto px-4 lg:px-8 max-w-7xl overflow-hidden sm:px-6"><nav aria-label=Footer class="flex justify-center flex-wrap -mx-5 -my-2"><div class="text-center px-5 py-2"><a href=https://astro-docs-compress-critters.pages.dev/en/concepts/why-astro/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Why Astro?</a></div><div class="text-center px-5 py-2"><a href=https://astro-docs-compress-critters.pages.dev/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Documentation</a></div><div class="text-center px-5 py-2"><a href=/blog class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Blog</a></div><div class="text-center px-5 py-2"><a href=/press class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Press</a></div><div class="text-center px-5 py-2"><a href=/privacy class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Privacy Policy</a></div><div class="text-center px-5 py-2"><a href=https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/company/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">The Astro Technology Company (We&#39;re Hiring!)</a></div></nav><div class="flex justify-center mt-8 space-x-6"><a href=https://github.com/withastro/astro class="hover:text-neutral-100 text-neutral-300" title="Go to Astro's GitHub repo"><span class=sr-only>Go to Astro&#39;s GitHub repo</span> </a><a href=/chat class="hover:text-neutral-100 text-neutral-300" title="Join the Astro community on Discord"><span class=sr-only>Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class="hover:text-neutral-100 text-neutral-300" title="Follow Astro on Twitter"><span class=sr-only>Follow Astro on Twitter</span></a></div></div></footer></div></body></html>