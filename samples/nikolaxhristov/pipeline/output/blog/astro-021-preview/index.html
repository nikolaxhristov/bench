<!DOCTYPE html><html class=astro-F3HETJL3 lang=en><head><!-- Global Metadata --><meta charset=utf-8><meta content="Astro v1.6.10" name=generator><meta content="width=device-width" name=viewport><meta content=#8D46E7 name=theme-color><link href=/favicon.svg rel=icon type=image/svg+xml><link href=/favicon.svg rel=mask-icon color=#8D46E7><link href=/sitemap-index.xml rel=sitemap><link href=/rss.xml rel=alternate type=application/rss+xml title=RSS><title>Astro 0.21 Preview: Vite + WASM = ⚡️ | Astro</title><!-- SEO STARTS --><meta content=yes name=mobile-web-app-capable><meta content="follow, index" name=robots><meta content=Astro name=apple-mobile-web-app-title><meta content="Get a sneak preview of what is next for Astro, including our new Vite build engine and WASM-powered Go compiler." name=description><link href=https://astro.build.compress.critters.pages.dev/blog/astro-021-preview/ rel=canonical><meta content=Astro name=og:site_name property=og:site_name><meta content=article name=og:type property=og:type><meta content="Get a sneak preview of what is next for Astro, including our new Vite build engine and WASM-powered Go compiler." property=og:description><meta content="Astro 0.21 Preview: Vite + WASM = ⚡️ | Astro" property=og:title><meta content=https://astro.build.compress.critters.pages.dev/assets/social_Z1Atds2.jpeg property=og:image><meta content=https://astro.build.compress.critters.pages.dev/blog/astro-021-preview/ property=og:url><meta content=summary_large_image name=twitter:card><meta content=astrodotbuild name=twitter:site><meta content="Astro 0.21 Preview: Vite + WASM = ⚡️ | Astro" name=twitter:title><meta content="Get a sneak preview of what is next for Astro, including our new Vite build engine and WASM-powered Go compiler." name=twitter:description><meta content=https://astro.build.compress.critters.pages.dev/assets/social_Z1Atds2.jpeg name=twitter:image><!-- /SEO ENDS--><!-- Fathom - beautiful, simple website analytics --><script src=https://certain-quality.astro.build/script.js data-site=EZBHTSIG defer=defer></script><link href=/assets/404.2f0011fe.css rel=stylesheet /><link href=/assets/_slug_.b0ffba02.css rel=stylesheet /><link href=/assets/_slug_.e85d6370.css rel=stylesheet /><link href=/assets/rss.xml.c4aaed3a.css rel=stylesheet /><script src=/hoisted.325dab7f.js type=module></script><script src=/page.5a6f3db5.js type=module></script></head><body class=astro-F3HETJL3><div class="flex flex-col astro-F3HETJL3 min-h-screen overflow-hidden relative"><header class="astro-2EIQQAR5 fixed left-0 right-0 top-0 z-20" id=navheader><div class="astro-2EIQQAR5 bg-neutral-900 py-4 text-neutral-400"><nav aria-label=Global class="astro-2EIQQAR5 flex items-center justify-between max-w-7xl mx-auto px-4 relative sm:px-6"><div class="astro-2EIQQAR5 flex items-center flex-1 flex-col gap-y-6 sm:flex-row"><div class="astro-2EIQQAR5 flex items-center justify-between -m-2 md:w-auto w-full"><a href=/ class="astro-2EIQQAR5 flex font-semibold gap-x-1 text-neutral-50 text-xl" id=navlogo><span class="astro-2EIQQAR5 sr-only">Astro</span></a><div class="astro-2EIQQAR5 flex items-center -mr-2 md:hidden sm:-mr-6"><button aria-expanded=false class="astro-2EIQQAR5 items-center focus-ring-inset focus:outline-none focus:ring-2 focus:ring-neutral-50 hover:bg-neutral-600 hover:text-neutral-100 inline-flex justify-center p-2 rounded-md" id=menubtn type=button><span class="astro-2EIQQAR5 sr-only">Open main menu</span></button></div></div><div class="astro-2EIQQAR5 flex flex-col sm:flex-row gap-x-8 gap-y-4 sm:ml-10 sm:pb-0 sm:text-left text-center" id=menu><a href=/showcase class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Showcase </a><a href=https://astro.docs.compress.critters.pages.dev class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Docs </a><a href=/themes class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Themes </a><a href=/integrations class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Integrations </a><a href=/blog class="astro-2EIQQAR5 text-neutral-50 hover:text-neutral-300 text-base">Blog</a></div><div class="astro-2EIQQAR5 flex items-center gap-x-3 pb-4 sm:hidden" id=mobilesocial><a href=https://github.com/withastro/astro class="astro-2EIQQAR5 flex items-center ml-3 no-underline" title="Go to Astro's GitHub repo"><div class="astro-2EIQQAR5 hidden item-center sm:flex"><div class="astro-2EIQQAR5 flex items-center bg-primary-900 border border-primary-500 border-r-0 h-6 rounded-l px-2 text-[13px] font-semibold	leading-3 text-orange-100"><svg aria-hidden=true class="astro-2EIQQAR5 block h-4 mr-1 w-4" fill=currentColor viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg><path class=astro-2EIQQAR5 d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> 22.7K</div><div class="astro-2EIQQAR5 inline-block overflow-hidden w-[18px]"><div class="astro-2EIQQAR5 border-l-0 bg-primary-900 border border-primary-500 h-6 origin-top-left rotate-45 transform w-[17px]"></div></div></div></a><a href=/chat class=astro-2EIQQAR5><span class="astro-2EIQQAR5 sr-only">Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class=astro-2EIQQAR5><span class="astro-2EIQQAR5 sr-only">Follow Astro on Twitter</span></a></div></div><div class="astro-2EIQQAR5 items-center gap-x-3 hidden md:flex ml-6 pl-1"><a href=https://github.com/withastro/astro class="astro-2EIQQAR5 flex items-center ml-3 no-underline" title="Go to Astro's GitHub repo"><div class="astro-2EIQQAR5 hidden item-center sm:flex"><div class="astro-2EIQQAR5 flex items-center bg-primary-900 border border-primary-500 border-r-0 h-6 rounded-l px-2 text-[13px] font-semibold	leading-3 text-orange-100"><svg aria-hidden=true class="astro-2EIQQAR5 block h-4 mr-1 w-4" fill=currentColor viewBox="0 0 20 20" xmlns=http://www.w3.org/2000/svg><path class=astro-2EIQQAR5 d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg> 22.7K</div><div class="astro-2EIQQAR5 inline-block overflow-hidden w-[18px]"><div class="astro-2EIQQAR5 border-l-0 bg-primary-900 border border-primary-500 h-6 origin-top-left rotate-45 transform w-[17px]"></div></div></div></a><a href=/chat class=astro-2EIQQAR5 title="Join the Astro community on Discord"><span class="astro-2EIQQAR5 sr-only">Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class=astro-2EIQQAR5 title="Follow Astro on Twitter"><span class="astro-2EIQQAR5 sr-only">Follow Astro on Twitter</span></a></div></nav></div></header><main class="astro-Q52DA2LF astro-F3HETJL3 flex-1"><article class="astro-Q52DA2LF max-w-screen-md mx-auto px-4 py-12 sm:py-24"><h1 class="astro-Q52DA2LF font-bold my-6 sm:text-5xl text-4xl text-center text-neutral-900">Astro 0.21 Preview: Vite + WASM = ⚡️</h1><div class="astro-Q52DA2LF my-4 space-y-2 text-lg text-neutral-500"><p class="flex items-center astro-Q52DA2LF flex-wrap gap-2 justify-center"><time class=astro-Q52DA2LF datetime="October 6, 2021">October 6, 2021 </time><span class=astro-Q52DA2LF>by</span> <a href=https://twitter.com/FredKSchott class="astro-Q52DA2LF hover:underline inline-flex no-underline space-x-1"><img alt="" aria-hidden=true class="my-0 h-6 rounded-full w-6" decoding=async height=48 loading=lazy src=/assets/fred.d6714e6b_hg6iM.jpg width=48> <span class=astro-Q52DA2LF>Fred Schott</span></a></p></div><hr class="astro-Q52DA2LF my-4"><div class="astro-Q52DA2LF text-lg prose"><p>Astro v0.21.0 will be our biggest release yet. At a high-level, it includes:</p><ul><li><a href=#hello-vite>A new build engine, powered by Vite</a></li><li><a href=#hello-wasm>A new WASM compiler, written in Go</a></li><li><a href=#components-in-markdown>Brand new features, like Components-in-Markdown</a></li><li><a href=#hmr-meet-html>A new system for HTML live-updating via HMR</a></li></ul><p>You can try out our latest release today <a href=https://gitpod.io#snapshot/5e7cf2f1-8108-4fa5-99d3-ed8de70d8c23>in the browser</a> or by running <code>npm install astro@next--compiler</code> in a new project directory on your machine.</p><p>Astro is quickly becoming the production-ready framework for building faster, content-focused websites. To celebrate this milestone, here are some highlights and details on what you can expect in Astro v0.21.0 and beyond.</p><h2 id=hello-vite>Hello, Vite!</h2><p>Astro 0.21 is getting an internal build engine upgrade, replacing Snowpack with <a href=https://vitejs.dev>Vite</a> going forward.</p><p>We ran some early experiments with Vite and came away extremely impressed. Vite is well-maintained, well-documented, a bit faster, has great error messages, and has been building clear community buy-in across multiple frameworks. SSR handling can be a bit flakey, but the Vite team is aware of this and actively working on it.</p><p>So now, when Evan You tweets about <a href=https://twitter.com/youyuxi/status/1440718351802646550>some great performance optimization</a> that they’re making in Vite you can be certain that the same speed is coming to Astro as well.</p><p>The reverse is also true: we can now contribute fixes and improvements back to the larger Vite community. Now, when we fix an SSR bug in Astro (like <a href=https://github.com/vitejs/vite/pull/5197>adding support for ESM-only npm packages</a>) we’re also fixing it for every other Vite user, including <a href=https://kit.svelte.dev/docs#routing-endpoints>SvelteKit</a>.</p><p>There’s one other huge benefit to choosing Vite: Rollup plugins. Starting in v0.21.0, you’ll be able to connect the entire ecosystem of Rollup plugins to Astro. Enable new features like <a href=https://github.com/JonasKruckenberg/imagetools/tree/main/packages/vite>image optimizations</a> and <a href=https://github.com/antfu/unplugin-icons>icon loading</a> with just a few simple plugins. Magic!</p><p>This switch from Snowpack to Vite might come as a surprise to some: Both Drew and myself are maintainers on both projects. This was <a href=https://dev.to/fredkschott/5-more-things-i-learned-building-snowpack-to-20-000-stars-5dc9>a hard decision</a> for us to make. But ultimately, after working with both tools I can confidently say that Vite will be a great choice for Astro’s future.</p><h2 id=hello-wasm>Hello, WASM!</h2><p>Astro 0.21 features another huge low-level improvement: the brand new <a href=https://github.com/withastro/astro-compiler-next>@astrojs/compiler</a>. Astro’s new compiler is written in Go and distributed as WASM. You can run it right in your browser, or on the server in Node.js and Deno.</p><p>The new <a href=https://github.com/withastro/astro-compiler-next>@astrojs/compiler</a> unlocks:</p><ul><li><strong>Flexibility:</strong> Run the compiler anywhere with WASM.</li><li><strong>Speed:</strong> Build sites faster with Go’s compiled-language performance.</li><li><strong>Stability:</strong> Writing our own compiler allowed us to fix some long-standing bugs.</li></ul><p>You can play with the new compiler today right in your browser at <a href=https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/play>https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/play</a>. This REPL is just one example of what is now possible when you have a fast, runs-anywhere compiler.</p><p></p><p>Shout out to <span class="inline-block align-middle leading-none m-0 mention"><a href=https://twitter.com/n_moore class="m-0 font-bold inline-flex items-center no-underline space-x-1 whitespace-nowrap" title="Follow Nate Moore on Twitter"><img alt="" aria-hidden=true class="my-0 h-6 rounded-full w-6" decoding=async height=48 loading=lazy src=/assets/nate.f5dc0bbe_Z1lJxJF.jpg width=48> <span>Nate Moore</span> </a></span>who did an incredible job with this project.</p><p></p><h2 id=components-in-markdown>Components in Markdown</h2><p>Our most requested feature <strong><em>by far</em></strong> has been the ability to use components directly in Markdown. After months of work, we’re excited to announce that this feature is finally coming to Astro.</p><p>Starting in v0.21.0, you can import components inside of your Markdown frontmatter via an optional <code>setup</code> script. Once imported, your components can be used anywhere on the page:</p><pre class=astro-code style=background-color:#0d1117;overflow-x:auto><code><span class=line><span style=color:#c9d1d9>---</span></span>
<span class=line><span style=color:#7ee787>title</span><span style=color:#c9d1d9>: </span><span style=color:#a5d6ff>&quot;Astro 0.21 Early Preview&quot;</span></span>
<span class=line><span style=color:#7ee787>setup</span><span style=color:#c9d1d9>: </span><span style=color:#ff7b72>|</span></span>
<span class=line><span style=color:#a5d6ff>    import Logo from &#39;../components/Logo.astro&#39;;</span></span>
<span class=line><span style=color:#a5d6ff>    import ReactCounter from &#39;../components/Counter.jsx&#39;;</span></span>
<span class=line><span style=color:#c9d1d9>---</span></span>
<span class=line></span>
<span class=line><span style=color:#79c0ff;font-style:italic># Astro now supports components in Markdown!</span></span>
<span class=line></span>
<span class=line><span style=color:#c9d1d9>&lt;Logo /&gt;</span></span>
<span class=line></span>
<span class=line><span style=color:#ffa657>-</span><span style=color:#c9d1d9>   Back to markdown here.</span></span>
<span class=line><span style=color:#ffa657>-</span><span style=color:#c9d1d9>   Supports static Astro components.</span></span>
<span class=line><span style=color:#ffa657>-</span><span style=color:#c9d1d9>   Supports dynamic React/Vue/Svelte components!</span></span>
<span class=line></span>
<span class=line><span style=color:#c9d1d9>&lt;ReactCounter start={0} client:load /&gt;</span></span></code></pre><p>This new <code>setup</code> script was designed for maximum flexibility. We’ll keep improving this API going forward with planned support for default components, default layouts, and markdown component overrides.</p><h2 id=hmr-meet-html>HMR, meet HTML</h2><p>Starting in v0.21.0, Astro will support full HMR for Astro components and pages. Change any <code>.astro</code> file in your codebase, and watch the dev server update the page without a full refresh and without losing any client state.</p><p>Astro has always supported powerful HMR updates for client-side JavaScript components like React, Preact, Svelte, Vue, and Solid.js. But adding this for Astro was a fun challenge because Astro components are just static HTML. Our “Zero JavaScript” approach meant that there was no “Astro runtime” to hook into for updates. We had to get creative.</p><p>Now, Astro’s dev server sends HTML updates to the browser and then runs a small script to diff those updates against the current page. This creates a more granular, component-level HMR update that won’t impact the rest of the page.</p><h2 id=try-it-today>Try it today</h2><p>If you’ve read this far, we’d love your help trying out the latest release before launch. You can try out our latest release today <a href=https://gitpod.io#snapshot/5e7cf2f1-8108-4fa5-99d3-ed8de70d8c23>in the browser</a> or by running <code>npm install astro@next--compiler</code> in a new project directory. You can follow our progress and leave feedback in the <code>next</code> PR on GitHub: <a href=https://github.com/withastro/astro/pull/1406>https://github.com/withastro/astro/pull/1406</a></p><p>Leave feedback, report bugs, and get involved with Astro’s development in our <a href=https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/chat>Discord server</a>. You can also <a href=https://twitter.com/astrodotbuild>follow along</a> on Twitter.</p><aside class="bg-slate-50 border font-sans px-6 py-4 rounded"><div class="text-lg leading-normal mb-1 mt-3"><p>Keep your eyes to the sky Astronaut! 🧑‍🚀🚀</p><p>There will be more news on v0.21 soon.</p></div></aside></div></article></main><footer class=bg-neutral-900><div class="py-12 mx-auto px-4 lg:px-8 max-w-7xl overflow-hidden sm:px-6"><nav aria-label=Footer class="flex justify-center flex-wrap -mx-5 -my-2"><div class="text-center px-5 py-2"><a href=https://astro-docs-compress-critters.pages.dev/en/concepts/why-astro/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Why Astro?</a></div><div class="text-center px-5 py-2"><a href=https://astro-docs-compress-critters.pages.dev/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Documentation</a></div><div class="text-center px-5 py-2"><a href=/blog class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Blog</a></div><div class="text-center px-5 py-2"><a href=/press class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Press</a></div><div class="text-center px-5 py-2"><a href=/privacy class="text-base hover:text-neutral-100 hover:underline text-neutral-300">Privacy Policy</a></div><div class="text-center px-5 py-2"><a href=https://astro.build.compress.critters.pages.dev.compress.critters.pages.dev/company/ class="text-base hover:text-neutral-100 hover:underline text-neutral-300">The Astro Technology Company (We&#39;re Hiring!)</a></div></nav><div class="flex justify-center mt-8 space-x-6"><a href=https://github.com/withastro/astro class="hover:text-neutral-100 text-neutral-300" title="Go to Astro's GitHub repo"><span class=sr-only>Go to Astro&#39;s GitHub repo</span> </a><a href=/chat class="hover:text-neutral-100 text-neutral-300" title="Join the Astro community on Discord"><span class=sr-only>Join the Astro community on Discord</span> </a><a href=https://twitter.com/astrodotbuild class="hover:text-neutral-100 text-neutral-300" title="Follow Astro on Twitter"><span class=sr-only>Follow Astro on Twitter</span></a></div></div></footer></div></body></html>